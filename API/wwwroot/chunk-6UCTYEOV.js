import{a as b,b as N,c as q}from"./chunk-RBCBJ7TT.js";import{a as B}from"./chunk-IXRM5HNE.js";import{a as U,d as L}from"./chunk-YU3FMOKV.js";import{b as $}from"./chunk-AERLV3S3.js";import{a as z}from"./chunk-FXCORFYO.js";import{h as P,ha as V,j as F,k as j}from"./chunk-4T5HOBQW.js";import{Db as k,Gb as v,Hb as y,Ib as e,Jb as t,Ob as I,Rb as O,Rc as h,Sc as E,Tb as w,Wb as D,Xb as A,_a as R,ac as M,bb as n,bc as i,cc as c,dc as m,jc as S,ka as u,nc as l,oa as f,oc as s,pc as g,wb as T,xa as _,ya as C}from"./chunk-SA4P2CAX.js";var K=(a,d)=>d.productId;function Q(a,d){if(a&1){let r=I();e(0,"tr")(1,"td",23)(2,"div",24)(3,"img",25,0),O("error",function(){_(r);let o=M(4);return C(o.src="/images/wanted-image.jpg")}),t(),e(5,"span"),i(6),t()()(),e(7,"td",26),i(8),t(),e(9,"td",27),i(10),l(11,"currency"),t()()}if(a&2){let r=d.$implicit;n(3),D("src",r.pictureUrl,R),D("alt",r.productName),n(3),c(r.productName),n(2),m("x",r.quantity,""),n(2),c(s(11,5,r.price))}}function W(a,d){if(a&1){let r=I();e(0,"mat-card",1)(1,"div",2)(2,"div",3)(3,"h2",4),i(4),t(),e(5,"button",5),O("click",function(){_(r);let o=w();return C(o.onReturnClick())}),i(6),t()(),e(7,"div",6)(8,"div",7)(9,"h4",8),i(10,"Billing and delivery information"),t(),e(11,"dl")(12,"dt",9),i(13,"Shipping address"),t(),e(14,"dd",10),i(15),l(16,"address"),t()(),e(17,"dl")(18,"dt",9),i(19,"Payment info"),t(),e(20,"dd",10),i(21),l(22,"paymentCard"),t()()(),e(23,"div",7)(24,"h4",8),i(25,"Order details"),t(),e(26,"dl")(27,"dt",9),i(28,"Email address"),t(),e(29,"dd",10),i(30),t()(),e(31,"dl")(32,"dt",9),i(33,"Order status"),t(),e(34,"dd",10),i(35),t()(),e(36,"dl")(37,"dt",9),i(38,"Order date"),t(),e(39,"dd",10),i(40),l(41,"date"),t()()()(),e(42,"div",11)(43,"div",12)(44,"table",13)(45,"tbody",14),v(46,Q,12,7,"tr",null,K),t()()()(),e(48,"div",15)(49,"p",16),i(50,"Order summary"),t(),e(51,"div",17)(52,"div",7)(53,"dl",18)(54,"dt",19),i(55,"Subtotal"),t(),e(56,"dd",20),i(57),l(58,"currency"),t()(),e(59,"dl",18)(60,"dt",19),i(61,"Discount"),t(),e(62,"dd",21),i(63),l(64,"currency"),t()(),e(65,"dl",18)(66,"dt",19),i(67,"Delivery fee"),t(),e(68,"dd",20),i(69),l(70,"currency"),t()()(),e(71,"dl",22)(72,"dt",19),i(73,"Total"),t(),e(74,"dd",20),i(75),l(76,"currency"),t()()()()()()}if(a&2){let r=w();n(4),m(" Order summary for order #",r.order.id," "),n(2),m(" ",r.buttonText," "),n(9),c(s(16,11,r.order.shippingAddress)),n(6),m(" ",s(22,13,r.order.paymentSummary)," "),n(9),c(r.order.buyerEmail),n(5),c(r.order.status),n(5),m(" ",g(41,15,r.order.orderDate,"medium")," "),n(6),y(r.order.orderItems),n(11),m(" ",s(58,18,r.order.subtotal)," "),n(6),m(" -",s(64,20,r.order.discount)," "),n(6),m(" ",s(70,22,r.order.shippingPrice)," "),n(6),m(" ",s(76,24,r.order.total)," ")}}var G=(()=>{let d=class d{constructor(){this.orderService=u(b),this.activatedRoute=u(P),this.accountService=u($),this.adminService=u(z),this.router=u(F),this.buttonText=this.accountService.isAdmin()?"Return to admin":"Return to orders"}ngOnInit(){this.loadOrder()}onReturnClick(){this.accountService.isAdmin()?this.router.navigateByUrl("/admin"):this.router.navigateByUrl("/orders")}loadOrder(){let p=this.activatedRoute.snapshot.paramMap.get("id");if(!p)return;(this.accountService.isAdmin()?this.adminService.getOrder(+p):this.orderService.getOrderDetailed(+p)).subscribe({next:x=>this.order=x})}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=f({type:d,selectors:[["app-order-detailed"]],standalone:!0,features:[S],decls:1,vars:1,consts:[["imgRef",""],[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"px-4","w-full"],[1,"flex","justify-between","items-center","align-middle"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","border-gray-200","p-4","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10",3,"error","src","alt"],[1,"p-4"],[1,"p-4","text-right"]],template:function(o,x){o&1&&T(0,W,77,26,"mat-card",1),o&2&&k(x.order?0:-1)},dependencies:[L,U,V,h,E,N,q]});let a=d;return a})();var X=(a,d)=>d.id;function Y(a,d){if(a&1&&(e(0,"tr",10)(1,"th",11),i(2),t(),e(3,"td"),i(4),l(5,"date"),t(),e(6,"td"),i(7),l(8,"currency"),t(),e(9,"td"),i(10),t()()),a&2){let r=d.$implicit;A("routerLink","/orders/",r.id,""),n(2),m("# ",r.id,""),n(2),c(g(5,6,r.orderDate,"medium")),n(3),c(s(8,9,r.total)),n(3),c(r.status)}}var H=(()=>{let d=class d{constructor(){this.orderService=u(b),this.orders=[]}ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:p=>this.orders=p})}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=f({type:d,selectors:[["app-order"]],standalone:!0,features:[S],decls:19,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(o,x){o&1&&(e(0,"div",0)(1,"h2",1),i(2,"My orders"),t(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr",6)(8,"th",7),i(9,"Order"),t(),e(10,"th",8),i(11,"Date"),t(),e(12,"th",8),i(13,"Total"),t(),e(14,"th",8),i(15,"Status"),t()()(),e(16,"tbody",9),v(17,Y,11,11,"tr",10,X),t()()()()()),o&2&&(n(17),y(x.orders))},dependencies:[j,h,E]});let a=d;return a})();var be=[{path:"",component:H,canActivate:[B]},{path:":id",component:G,canActivate:[B]}];export{be as orderRoutes};
